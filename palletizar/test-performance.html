<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 15px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
    </style>
</head>
<body>
    <h1>ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h3>ğŸ“Š ãƒ¡ãƒ¢ãƒªç›£è¦–ãƒ†ã‚¹ãƒˆ</h3>
        <p>ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
        <button onclick="testMemoryMonitoring()" class="btn-primary">ãƒ¡ãƒ¢ãƒªç›£è¦–ãƒ†ã‚¹ãƒˆ</button>
        <div id="memoryResult"></div>
    </div>
    
    <div class="test-section">
        <h3>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ†ã‚¹ãƒˆ</h3>
        <p>è¨ˆç®—æ™‚é–“ã®æ¸¬å®šæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
        <button onclick="testPerformanceMeasurement()" class="btn-primary">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ†ã‚¹ãƒˆ</button>
        <div id="performanceResult"></div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ” ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ†ã‚¹ãƒˆ</h3>
        <p>ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
        <button onclick="testDataValidation()" class="btn-primary">ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ†ã‚¹ãƒˆ</button>
        <div id="validationResult"></div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ“ˆ é€²æ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h3>
        <p>é€²æ—ãƒãƒ¼ã®è¡¨ç¤ºæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
        <button onclick="testProgressBar()" class="btn-primary">é€²æ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
        <div id="progressResult"></div>
    </div>

    <script>
        // ãƒ¡ãƒ¢ãƒªç›£è¦–ãƒ†ã‚¹ãƒˆ
        function testMemoryMonitoring() {
            const result = document.getElementById('memoryResult');
            try {
                if (performance.memory) {
                    const memory = {
                        used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024 * 100) / 100,
                        total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024 * 100) / 100,
                        limit: Math.round(performance.memory.jsHeapSizeLimit / 1024 / 1024 * 100) / 100,
                        percentage: Math.round((performance.memory.usedJSHeapSize / performance.memory.jsHeapSizeLimit) * 100)
                    };
                    
                    result.innerHTML = `
                        <div class="success">
                            âœ… ãƒ¡ãƒ¢ãƒªç›£è¦–æ©Ÿèƒ½: æ­£å¸¸å‹•ä½œ<br>
                            ä½¿ç”¨é‡: ${memory.used}MB<br>
                            ç·é‡: ${memory.total}MB<br>
                            åˆ¶é™: ${memory.limit}MB<br>
                            ä½¿ç”¨ç‡: ${memory.percentage}%
                        </div>
                    `;
                } else {
                    result.innerHTML = `
                        <div class="warning">
                            âš ï¸ ãƒ¡ãƒ¢ãƒªç›£è¦–æ©Ÿèƒ½: éå¯¾å¿œ<br>
                            ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–ãŒã§ãã¾ã›ã‚“ã€‚
                        </div>
                    `;
                }
            } catch (error) {
                result.innerHTML = `
                    <div class="error">
                        âŒ ãƒ¡ãƒ¢ãƒªç›£è¦–ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}
                    </div>
                `;
            }
        }
        
        // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ†ã‚¹ãƒˆ
        function testPerformanceMeasurement() {
            const result = document.getElementById('performanceResult');
            try {
                const startTime = performance.now();
                
                // æ¨¡æ“¬è¨ˆç®—å‡¦ç†
                let sum = 0;
                for (let i = 0; i < 1000000; i++) {
                    sum += Math.sqrt(i);
                }
                
                const endTime = performance.now();
                const duration = (endTime - startTime) / 1000;
                
                result.innerHTML = `
                    <div class="success">
                        âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šæ©Ÿèƒ½: æ­£å¸¸å‹•ä½œ<br>
                        è¨ˆç®—æ™‚é–“: ${duration.toFixed(3)}ç§’<br>
                        è¨ˆç®—çµæœ: ${sum.toFixed(2)}
                    </div>
                `;
            } catch (error) {
                result.innerHTML = `
                    <div class="error">
                        âŒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}
                    </div>
                `;
            }
        }
        
        // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ†ã‚¹ãƒˆ
        function testDataValidation() {
            const result = document.getElementById('validationResult');
            try {
                // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
                const testCartons = [
                    { code: 'TEST1', qty: 100, weight: 5.5, l: 50, w: 30, h: 20 },
                    { code: '', qty: 0, weight: -1, l: 600, w: 0, h: 300 },
                    { code: 'TEST3', qty: 999999, weight: 9999, l: 1, w: 1, h: 1 }
                ];
                
                let successCount = 0;
                let errorCount = 0;
                
                testCartons.forEach((carton, index) => {
                    // ç°¡æ˜“æ¤œè¨¼
                    if (carton.code && carton.qty > 0 && carton.weight > 0 && 
                        carton.l > 0 && carton.l <= 500 && 
                        carton.w > 0 && carton.w <= 500 && 
                        carton.h > 0 && carton.h <= 200) {
                        successCount++;
                    } else {
                        errorCount++;
                    }
                });
                
                result.innerHTML = `
                    <div class="success">
                        âœ… ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼æ©Ÿèƒ½: æ­£å¸¸å‹•ä½œ<br>
                        æ­£å¸¸ãƒ‡ãƒ¼ã‚¿: ${successCount}ä»¶<br>
                        ç•°å¸¸ãƒ‡ãƒ¼ã‚¿: ${errorCount}ä»¶<br>
                        æ¤œè¨¼å®Œäº†
                    </div>
                `;
            } catch (error) {
                result.innerHTML = `
                    <div class="error">
                        âŒ ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}
                    </div>
                `;
            }
        }
        
        // é€²æ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        function testProgressBar() {
            const result = document.getElementById('progressResult');
            try {
                // é€²æ—ãƒãƒ¼ã®HTMLã‚’ç”Ÿæˆ
                const progressHTML = `
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                        <div class="progress-text">ãƒ†ã‚¹ãƒˆå®Œäº†: 75%</div>
                    </div>
                `;
                
                result.innerHTML = `
                    <div class="success">
                        âœ… é€²æ—è¡¨ç¤ºæ©Ÿèƒ½: æ­£å¸¸å‹•ä½œ<br>
                        ${progressHTML}
                    </div>
                `;
            } catch (error) {
                result.innerHTML = `
                    <div class="error">
                        âŒ é€²æ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆå¤±æ•—: ${error.message}
                    </div>
                `;
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.addEventListener('load', () => {
            console.log('ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ãƒ†ã‚¹ãƒˆé–‹å§‹');
            testMemoryMonitoring();
            testPerformanceMeasurement();
            testDataValidation();
            testProgressBar();
        });
    </script>
</body>
</html>