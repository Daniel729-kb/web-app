<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Automate Container Loading Planner</title>
    <link rel="stylesheet" href="../styles/theme.css">
    <link rel="stylesheet" href="../styles/variables.css">
    <link rel="stylesheet" href="../styles/components.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <h1>Automate Container Loading Planner</h1>
                <p>最適なコンテナ積載計画を自動生成</p>
            </div>
            <div class="header-controls">
                <button class="dark-mode-toggle" id="darkModeToggle" title="ダークモード切り替え">
                    🌙
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="form-section">
                    <h2>パレット設定</h2>
                    
                    <div class="form-group">
                        <label for="palletLength">長さ (cm)</label>
                        <input type="number" id="palletLength" min="1" max="1000" placeholder="例: 120">
                    </div>
                    
                    <div class="form-group">
                        <label for="palletWidth">幅 (cm)</label>
                        <input type="number" id="palletWidth" min="1" max="1000" placeholder="例: 80">
                    </div>
                    
                    <div class="form-group">
                        <label for="palletQty">数量</label>
                        <input type="number" id="palletQty" min="1" max="100" placeholder="例: 10">
                    </div>

                    <div class="form-group">
                        <label>プリセット</label>
                        <div class="preset-pallets">
                            <button class="preset-btn" data-length="120" data-width="80">120×80</button>
                            <button class="preset-btn" data-length="100" data-width="100">100×100</button>
                            <button class="preset-btn" data-length="80" data-width="60">80×60</button>
                            <button class="preset-btn" data-length="60" data-width="40">60×40</button>
                            <button class="preset-btn" data-length="40" data-width="30">40×30</button>
                        </div>
                    </div>

                    <button class="btn btn-primary" id="addPalletBtn">
                        <span class="btn-icon">➕</span>
                        パレット追加
                    </button>
                </div>

                <div class="form-section">
                    <h2>コンテナ設定</h2>
                    
                    <div class="form-group">
                        <label for="containerType">コンテナタイプ</label>
                        <select id="containerType">
                            <option value="20ft">20ft コンテナ</option>
                            <option value="40ft">40ft コンテナ</option>
                            <option value="40ftHC">40ft ハイキューブ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="clearanceValue">クリアランス (cm)</label>
                        <input type="number" id="clearanceValue" min="0" max="50" value="5" step="0.5">
                    </div>

                    <div class="container-info" id="containerInfo">
                        <!-- Container info will be populated by JavaScript -->
                    </div>
                </div>

                <div class="form-section">
                    <h2>パレット一覧</h2>
                    <div class="pallet-list" id="palletList">
                        <!-- Pallets will be populated by JavaScript -->
                    </div>
                </div>

                <div class="form-section">
                    <button class="btn btn-success" id="calculateBtn">
                        <span class="btn-icon">🧮</span>
                        積載計算
                    </button>
                    
                    <button class="btn btn-info" id="testBtn">
                        <span class="btn-icon">🧪</span>
                        テスト実行
                    </button>
                    
                    <button class="btn btn-secondary" id="exportBtn">
                        <span class="btn-icon">📷</span>
                        画像エクスポート
                    </button>
                </div>
            </aside>

            <!-- Visualization Area -->
            <section class="visualization">
                <div class="visualization-header">
                    <h2>積載可視化</h2>
                    <div class="legend" id="legend"></div>
                </div>
                
                <div class="container-view">
                    <div class="work-area" id="workArea">
                        <div class="container-floor" id="containerFloor"></div>
                        <!-- Pallets will be rendered here -->
                    </div>
                </div>

                <!-- Statistics -->
                <div class="stats" id="stats">
                    <div class="stat-item">
                        <span class="stat-label">入力パレット:</span>
                        <span class="stat-value" id="inputPallets">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">表示パレット:</span>
                        <span class="stat-value" id="visiblePallets">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">積載パレット:</span>
                        <span class="stat-value" id="loadedPallets">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">積載率:</span>
                        <span class="stat-value" id="loadingRate">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">効率:</span>
                        <span class="stat-value" id="efficiency">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">残り面積:</span>
                        <span class="stat-value" id="remainingArea">0m²</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Notification System -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/algorithm.js"></script>
    <script src="js/pallet-manager.js"></script>
    <script src="js/visualization.js"></script>
    <script src="js/app.js"></script>
</body>
</html>